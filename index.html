<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>tshirt12</title>
<style>
  /* Styl dla model-viewer z proporcjami 16:9 */
  model-viewer {
    width: 100vw; /* 100% szerokości okna */
    height: 100vh; /* 100% wysokości okna przeglądarki */
    /* aspect-ratio: 16 / 9; */ /* Proporcje szerokości do wysokości */
    display: block;
  }

  /* Usuń marginesy i przewijanie strony */
  body, html {
    margin: 0;
    padding: 0;
    overflow: hidden;
  }
</style>
</head>
<body>

<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
<script async src="https://ga.jspm.io/npm:es-module-shims@1.7.1/dist/es-module-shims.js"></script> 
<script type="importmap">
{
  "imports": {
    "three": "https://cdn.jsdelivr.net/npm/three@^0.170.0/build/three.module.min.js"
  }
}
</script>
<script type="module" src="https://cdn.jsdelivr.net/npm/@google/model-viewer/dist/model-viewer-module.min.js"></script>  
<script type="module" src="https://cdn.jsdelivr.net/npm/@google/model-viewer-effects/dist/model-viewer-effects.min.js"></script> 

<model-viewer id="helmet" disable-tap camera-controls shadow-intensity="2" 
  skybox-image="../../assets/atmosphere.jpg" 
  max-camera-orbit="auto 90deg auto" 
  alt="tshirt" 
  src="../../assets/models/tshirt.glb" 
  ar 
  environment-image="../../assets/hdr.hdr" 
  poster="../../assets/LOADING.png" 
  xr-environment>
  <div class="controls">
    <div>
      <p>Diffuse</p>
      <select id="diffuse">
        <option value="../../assets/models/tshirt.png">tshirt1</option>
        <option value="../../assets/models/tshirt1.png">tshirt2</option>
      </select>
    </div>
    <div>
      <p>Metallic-roughness</p>
      <select id="metallicRoughness">
        <option value="../../assets/models/tshirt.png">Metallic</option>
      </select>
    </div>    
  </div>
</model-viewer>

<script type="module">
const modelViewerTexture1 = document.querySelector("model-viewer#helmet");

if (modelViewerTexture1) {
  modelViewerTexture1.addEventListener("load", () => {
    const material = modelViewerTexture1.model.materials[0];

    const createAndApplyTexture = async (channel, event) => {
      const texture = await modelViewerTexture1.createTexture(event.target.value);
      if (channel.includes('base') || channel.includes('metallic')) {
        material.pbrMetallicRoughness[channel].setTexture(texture);
      } else {
        material[channel].setTexture(texture);
      }
    };

    document.querySelector('#diffuse').addEventListener('input', (event) => {
      createAndApplyTexture('baseColorTexture', event);
    });

    document.querySelector('#metallicRoughness').addEventListener('input', (event) => {
      createAndApplyTexture('metallicRoughnessTexture', event);
    });
  });
} else {
  console.error("model-viewer element not found");
}
</script>

</body>
</html>